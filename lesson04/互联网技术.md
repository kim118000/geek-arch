### 一个典型的大型互联网应用系统使用了哪些技术方案和手段，主要解决什么问题？请列举

#### 1、软负载均衡

​       为了解决单台机器的处理能力上限，需要以集群的方式部署一组应用服务器提高请求连接数量、响应速度以及服务器可用性。通过软件负载算法如轮询、随机、hash、加权等路由一组应用服务器共同提供服务。

------

#### 2、分布式缓存

​		tomcat的session复制方案、session粘滞方案，都有一定的局限性

​		例如如果tomcat机器太多复制的成本就很高，session固定到某个tomcat上那么jvm内存就占用过大，而且容易不均匀，并且造成不是无状态服务，水平扩展就很难。通过把session存储在分布式缓存中，利用分布式缓存的集群部署、水平扩展，过期策略等功能，可以很好的对session进行管理。

​		另外使用分布式缓存解决了数据的快速存取，提高并发、响应速度，减少直接对数据库或者其它存储方案的冲击，毕竟磁盘IO的寻址速度还是很慢的，匹配不了CPU的计算速度，造成CPU资源的浪费。

------

#### 3、消息队列

3.1 异步处理

​		和第三方平台系统交互，这个过程消耗的时间较长，同步情况下资源浪费，为了让主流程快速响应返回、提高吞吐量，通过消息队列进行异步调用。

3.2 系统解耦

​		无论是HTTP或者RPC调用，都需要知道对方的地址，才能进行访问，这样或多或少就存在耦合，通过消息队列，上下游无需知道对方的存在，消息发送完成就返回了。主要解决了系统之间的耦合，系统的变化无须影响到其他系统。

3.3 流量削峰

​		消息队列通过发送端的技术手段，如异步、消息buffer等技术提高单次发送消息的吞吐量，解决高并发下大量消息压垮下游系统的风险，通过消息队列，下游系统能够根据自身的资源情况进行消息的消费。

#### 4、数据库分库分表

​		随着数据量的增长，数据库的性能将会遇到瓶颈。通过对数据进行分片存储，减少单个节点的数据量，借助多台服务器进行水平扩展，提高数据操作的各方面性能。分库分表的手段有hash、范围映射表等。

​		当然数据库的分库分表也会带来数据迁移的困难，通常情况下通过增加中间层减少变化对上层系统的影响，例如Mycat



#### 5、分布式文件系统

​		通过分布式文件系统，解决存储容量问题、容灾能力，例如HDFS可以在廉价的机器上提供高吞吐量的数据访问，海量的数据存储，通过复制集解决可靠性、可用性问题

#### 6、分布式一致性

​		在分布式系统中，数据一致性是一个难点，在不同场景下采取的方式也不一样。

​		在金融场景下，要保证数据的一致性，通常采用二阶段提交，TCC等手段进行数据的一致性处理，虽然性能、吞吐量不高，但能保证数据的一致性。

​		在非金融场景下，可采用可靠消息机制保证数据的一致性，通常还会增加失败补偿策略进行数据的纠正。

#### 7、链路追踪

​		分布式系统中，一个请求的调用链路会很长，很复杂，如何发现链路中哪个节点处理的响应时间问题，解决方法是通过在请求中的生成唯一的traceid，串联不同span中调用关系，最终通过日志采集组织请求中各个阶段的指标参数进行可视化，及时发现调用问题。

#### 8、日志采集与展示

​		分布式系统中服务器日志、系统日志等存储在成百上千个节点服务器上，如何快速定位日志是分布式系统需要解决的问题。目前开源的解决方案，是通过EFLK进行日志的采集、转换、存储、展示。

#### 9、指标监控报警

​		分布式系统中服务器的性能监控、app的性能监控等问题，目前开源的解决方案是通过promotheus时序数据库进行指标信息的采集，通过granfa进行可视化展示，根据规则报警。

#### 10、CDN

​		通过内容分发系统，将互联网资源放到离用户近的节点进行访问，一方面解决了应用服务器的带宽问题，另一方面用户提高了访问速度。

#### 11、DNS

​		通过域名解析，可以进行跨数据中心部署，实现异地多活，提高系统容错、容灾能力

